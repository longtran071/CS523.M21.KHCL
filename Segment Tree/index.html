<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="description"
    content="A Segment Tree (ST) is a binary tree that is build on top of an (usually integer) array so that we can solve the Range Min/Max/Sum Query as well as any Range Update Query of this array in O(log N) time instead of the naive O(N) time. Given an array A of N (usually integer) elements, we can build the corresponding RMinQ/RMaxQ/RSumQ Segment Tree in O(N) time.">
  <meta name="keywords" content="Segment Tree ST Range Min Max Sum Query RMQ RSQ">

  <meta name="csrf-token" content="dnpFoaLdt8h1fGdELjPDZZMSe9xLifyTd3ZYrUAE">
  <meta property="og:image" content="https://visualgo.net/img/png/segmenttree.png">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=>, initial-scale=1.0">
  <title>Segment Tree - Group 12</title>
  <link rel="stylesheet" href="main.css">
  <link rel="stylesheet" href="image\background3.jpg">
  <link rel="stylesheet" href="https://visualgo.net/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="https://visualgo.net/fonts/silkscreen/stylesheet.css">
  <!-- <link rel="stylesheet" type="text/css" href="https://visualgo.net/css/common-1.0.0.css"> -->
  <link rel="stylesheet" href="https://visualgo.net/css/viz-1.0.3.css">
  <link rel="stylesheet" href="https://visualgo.net/css/visual.css">
  <link rel="stylesheet" href="https://visualgo.net/css/drawgraph-1.0.0.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.9.0/p5.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.9.0/addons/p5.dom.min.js"></script>
  <script src="js\Node.js"></script>
  <script src="js\main.js"></script> 
  <script src="js\segTree.js"></script>
  <script src="js\Tree.js"></script>
  <style type="text/css">
    body{
      background-image:url('image/background3.jpg');
      width: 100%;
      background-repeat: no-repeat;
      background-size: cover;
    }

  </style>
</head>


<body>
  
 <div class="container">
   <div class="menu">
     <div class="up">
       <ul>
         <li id="Header">
           <a href=""> <ion-icon name="home-outline"></ion-icon >Group 12</a>
           </a>
         </li>
         <!-- <span id="title">
          <a id="title-Min" onClick="x=1">Min ST</a>
          <a id="title-Max" onClick="x=2">Max ST</a>
          <a id="title-Sum" onClick="x=3">Sum ST</a>
          </span>  -->
          <span id="title">
            <a id='title-Min' onClick="x=1">Min ST</a>
            <a id='title-Max'onClick="x=2">Max ST</a>
            <a id='title-Sum'class='selected-viz'onClick="x=3">Sum ST</a>
            </span>
       </ul>  
     </div>

     </div>
   </div>
 
     <div id="actions" class="panel">
<p id="create">Create</p>
<p id="rmq">Range Query</p>
<p id="update">Range Update</p>
</div>
<div id="actions-hide" class="panel-hide"><span style="color:blue; font-size: x-large; display: inline-block;">&gt;</span></div>
<div id="actions-extras">
<div class="create action-menu-pullout" id="create_action">
<div id="create-input" class="new-menu-option">
values = <input id="v-create" type="text" style="width: 175px;" title="Enter comma-separated integers" placeholder="Nhập giá trị" autocomplete="off" value=""> </div>
<div id="create-go" class="execAction new-menu-option coloured-menu-option" onClick="setup1(),draw()">
<p>Go</p>
</div>
<div id="create-random" class="execAction new-menu-option coloured-menu-option" onClick="setup2(),draw()">
<p>Random</p>
</div>
<div id="create-err" class="err" style="float: left;"></div>
</div>
<div class="rmq action-menu-pullout" id="rmq_action">
  <div id="rmq-input-l" class="new-menu-option">
  L = <input id="v-rmq-l" type="number" title="Enter an integer L" placeholder="L" autocomplete="off" value="0"> </div>
  <div id="rmq-input-r" class="new-menu-option">
  R = <input id="v-rmq-r" type="number" title="Enter an integer R" placeholder="R" autocomplete="off" value="6"> </div>
  <div id="rmq-go" class="execAction new-menu-option coloured-menu-option" onClick="setup3(),draw_query()">
  <p>Go</p>
  </div>
  <div id="rmq-err" class="err" style="float: left;"></div>
  </div>
  <div class="update action-menu-pullout" id="update_action">
  <div id="update-input-l" class="new-menu-option">
  L = <input id="v-update-l" type="number" title="Enter an integer L" placeholder="L" autocomplete="off" value="0"> </div>
  <div id="update-input-r" class="new-menu-option">
  R = <input id="v-update-r" type="number" title="Enter an integer R" placeholder="R" autocomplete="off" value="6"> </div>
  <div id="update-input-value" class="new-menu-option">
  VALUE = <input id="v-update-value" type="number" title="Enter an integer VALUE" placeholder="V" autocomplete="off" value="6"> </div>
  <div id="update-go" class="execAction new-menu-option coloured-menu-option" onClick=" setup4(),draw_update()">
  <p>Go</p>
  </div>
  </div>
  </div>
  
  </div>
    
      
      
      <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
      <script src="https://unpkg.com/d3-force-boundary@0.0.1/dist/d3-force-boundary.min.js"></script>
     
      <script>
           
      
            // var PHP_DOMAIN = ""; // is this still used? I turn it off on 4 Jan 2022, see if causes issue
      
            // surprise colour!
            // Referenced to in  home.js and viz.js also
            var colourArray = ["#52bc69", "#d65775"/*"#ed5a7d"*/, "#d9513c", "#fec515"]; // green, pink, blue, red, yellow, indigo, orange, lime
      
            function disableScroll() { $('html').css('overflow', 'hidden'); }
      
            function enableScroll() { $('html').css('overflow', 'visible'); }
      
            function replaceAll(find, replace, str) { return str.replace(new RegExp(find, 'g'), replace); }
      
            function getColours() {
              var generatedColours = new Array();
              while (generatedColours.length < 4) {
                var n = (Math.floor(Math.random() * colourArray.length));
                if ($.inArray(n, generatedColours) == -1)
                  generatedColours.push(n);
              }
              return generatedColours;
            }
      
            function isOn(value, position) {
              return (value>>position) & 1 === 1;
            }
      
            
            const MOBILE_WIDTH = 1000;
            const matchMediaMobile = window.matchMedia(`only screen and (max-width: ${MOBILE_WIDTH}px)`);
            const matchMediaNarrow = window.matchMedia(`only screen and (max-width: 500px)`);
            function isMobile() {
              return matchMediaMobile.matches;
            }
            //To fix the issue of a narrow desktop window being asked to rotate, I am now checking for it based on the navigator.userAgent to see if its mobile or not. 
            //This may change in the future if browsers decide to change the naming of userAgent for mobile browsers so may need to keep an eye on this.
            function isMobileOS() {
              return /Mobi/i.test(navigator.userAgent) && !/ipad/i.test(navigator.userAgent);
            }
            let portraitMatcher = window.matchMedia("(orientation:portrait)");
            function isPortrait() {
              return portraitMatcher.matches;
            }
      
            var generatedColours = getColours();
            var surpriseColour = colourArray[generatedColours[0]];
            var colourTheSecond = colourArray[generatedColours[1]];
            var colourTheThird = colourArray[generatedColours[2]];
            var colourTheFourth = colourArray[generatedColours[3]];
      
            $(function() {
              $('.links').css('background', surpriseColour);
              $('.colour').css("color", surpriseColour);
              $('h4').css("background-color", surpriseColour); // about, contact us etc. button background
      
              // title
              $('#title a').click(function() {
                $('#title a').removeClass('selected-viz');
                $(this).addClass('selected-viz');
              });
            });
      
      /*
      // test drop on 4 Jan 2022, see if got issues
            function checkLogin() {
              $.get('/checklogin', function(data) {
                var url = data['url'];
                window.location.href = '/' + url;
              });
            }
      */
      
            // big question mark on 4 Jan 2022: should I drop this GA for a better privacy policy?
      
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      
            function setCookie(cname, cvalue, exdays) {
              const d = new Date();
              d.setTime(d.getTime() + (exdays*24*60*60*1000));
              let expires = "expires="+ d.toUTCString();
              document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
            }
      
                    $(function () {
                ga('create', 'UA-1566631-4', 'auto');
                ga('send', 'pageview');
              })
            
            $('#gdpr-privacy-policy').click(function () {
              if ($(window).width() > 600) {
                $('#dark-overlay').fadeIn(function() {
                  $('#privacy-policy').fadeIn();
                });
              }
              else
                alert('Sorry, this dialog is too big. Please load it on bigger screen');
            })
          </script>
      
      <script src="https://visualgo.net/js/jquery-ui.min.js"></script>
      
      <script src="https://visualgo.net/js/d3.min.js"></script>
      <script src="https://visualgo.net/js/viz-1.0.6.js"></script>
      <script type="text/javascript">
          var extraCSS = {"update":"65px","rmq":"92px","create":"119px"};
          var actionsIds = {"create":{"p":"Create"},"rmq":{"p":"Range Query"},"update":{"p":"Range Update"}};
          var isOpens = {};
          var len = 3;
          var keys = ["create","rmq","update"]; 
          for (i = 0; i < len; i++) {
              var actionDetails = keys[i];
              isOpens[actionDetails] = false;
          }
          function openAction(id) {
              hideThirdTiers(id);
              $("." + id).css("bottom", extraCSS[id]);
              if (!isOpens[id]) {
                  $('.' + id).fadeIn('fast');
                  isOpens[id] = true;
              }
          }
          function closeAction(id) {
              hideThirdTiers(id);
              if (isOpens[id]) {
                  $('.' + id).fadeOut('fast');
                  $('#' + id + '-err').html("");
                  isOpens[id] = false;
              }
          }
      
          function hideEntireActionsPanel() {
              //hideAllThirdTiers()
                          closeAction('rmq');
                          closeAction('update');
                      hideActionsPanel();
          }
      
          function hideThirdTiers(tier1Action) {
              if ("parents" in actionsIds[tier1Action]) {
                  for (const secondTierAction of actionsIds[tier1Action]["parents"]) {
                      $('#' + secondTierAction + '-third-tier').fadeOut('fast');
                  }
              }
          }
      
          function hideAllThirdTiers() {
              for (const tier1Action in actionsIds) {
                  hideThirdTiers(tier1Action);
              }
          }
      
          function toggleChildExtras(tier1, selectedParentTier2) {
              hideThirdTiers(tier1);
              //this actionId must have childExtras
              var style = extraCSS[tier1];
              $("." + tier1).css("bottom", (parseInt(style.substring(0, style.length - 2)) - 27));
              //fade ins and outs are done on the ID whereas css class is set on the class
              //fade in the third tier of the selected 2nd tier parent
              $('#' + selectedParentTier2 + '-third-tier').fadeIn('fast');
      
              // //fade out all other third tiers of that 'action'
              // for (const parent of actions[tier1]["parents"]) {
              //     console.log("parent is " + parent + " for " + selectedParentTier2);
              //     if (parent != selectedParentTier2) {
              //         $('#' + parent + '-third-tier').fadeOut('fast');
              //     }
              // }
          }
      
          function setActionHeightOriginal(tier1Action) {
              $("." + tier1Action).css("bottom", extraCSS[tier1Action]);
          }
      
                  $('#' + 'create').click(function() {
                  openAction('create');
                                                                                  closeAction('rmq');
                                                                      closeAction('update');
                                          });
                  $('#' + 'rmq').click(function() {
                  openAction('rmq');
                                                      closeAction('create');
                                                                                                  closeAction('update');
                                          });
                  $('#' + 'update').click(function() {
                  openAction('update');
                                                      closeAction('create');
                                                                      closeAction('rmq');
                                                                      });
          
          //important to have all the input fields in actions menu take an id containing '-input'
          $("[id*='-input']").on("keypress keydown keyup", (event) => {
              event.stopPropagation();
          });
      </script>
      <script type="text/javascript">
      // Segment Tree Widget
      // original author: Cao Shengze
      
      var ST = function() {
        var self = this;
        var graphWidget = new GraphWidget();
      
        var maxValueAllowed = 99; // Range of valid allowed values
        var maxVertexAllowed = 16;
        this.maxVertexAllowed = maxVertexAllowed;
        this.maxValueAllowed = maxValueAllowed;
      
        //var initialArray = [15, 6, 23, 4, 8, 19, 7, 9, 3, 71];
        var initialArray = [18, 17, 13, 19, 15, 11, 20, 99];
        var curnodes;
        var funcname = ["min", "max", "sum"];
        var func = [
          function (x, y) {
            if (x == null)
              return y;
            else if (y == null)
              return x;
            else
              return internalSt[vertexMax+x]["value"] < internalSt[vertexMax+y]["value"] ? x : y;
          },
          function (x, y) {
            if (x == null)
              return y;
            else if (y == null)
              return x;
            else
              return internalSt[vertexMax+x]["value"] > internalSt[vertexMax+y]["value"] ? x : y;
          },
          function (x, y) {
            if (x == null)
              return y;
            else if (y == null)
              return x;
            else
              return x + y;
          }];
      
        //function min(x, y) { return x < y ? x : y; }
        //function max(x,y) { return x > y ? x : y; }
        /*
         * internalSt: Internal representation of BST in this object
         * The keys are the text of the nodes, and the value is the attributes of the corresponding node encapsulated in a JS object, which are:
         * - "parent": text of the parent node. If the node is root node, the value is null.
         * - "leftChild": text of the left child. No child -> null
         * - "rightChild": text of the right child. No child -> null
         * - "cx": X-coordinate of center of the node
         * - "cy": Y-coordinate of center of the node
         * - "height": height of the node. Height of root is 0
         * - "vertexClassNumber": Vertex class number of the corresponding node
         *
         * In addition, there is a key called "root" in internalSt, containing the text of the root node.
         * If BST is empty, root is null.
         */
      
        var internalSt = {};
        var amountVertex = 0;
        var vertexAmt = 0;
        var vertexMax = 0;
        var treetype = 0;
        var treefuncname = "";
        var treefunc = null;
       
        /*
         * internalStObject: a JS object with the same structure of internalSt. This means the BST doen't have to be the BST stored in this class
         * vertexTraversed: JS object with the vertexes of the BST which are to be marked as traversed as the key
         * edgeTraversed: JS object with the edges of the BST which are to be marked as traversed as the key
         */
      
        
        function recalculatePosition(){
          calcHeight(internalSt["root"], 0);
          updatePosition(internalSt["root"]);
      
         
      
          
        }
      
      
      }
      
      
      
      // STaction.js
      //actions panel stuff
      var actionsWidth = 150;
      var statusCodetraceWidth = 420;
      
      // local
      var stWidget = new ST(), gw;
      
      $(function() {
        $('#play').hide();
        gw = stWidget.getGraphWidget();
      
      });
      
      $('#title-Min').click(function() {
        if(isPlaying) { stop(); }
        showActionsPanel();
        hideStatusPanel();
        hideCodetracePanel();
        stWidget.init(getRandomData(), 0);
      });
      $('#title-Max').click(function() {
        if(isPlaying) { stop(); }
        showActionsPanel();
        hideStatusPanel();
        hideCodetracePanel();
        stWidget.init(getRandomData(), 1);
      });
      $('#title-Sum').click(function() {
        if(isPlaying) { stop(); }
        showActionsPanel();
        hideStatusPanel();
        hideCodetracePanel();
        stWidget.init(getRandomData(), 2);
      });
      
      stWidget.init(getRandomData(), 0);
      
      function getCreateData() {
        var input = $('#v-create').val();
        if (input == "") {
          $("#create-err").html('Please enter a comma seperated values');
          return null;
          /*vertexAmt = Math.floor((Math.random()*(stWidget.maxVertexAllowed-5) + 5));
          var initArr = [];
          while(initArr.length < vertexAmt)
            initArr.push(Math.floor(1+Math.random()*(stWidget.maxValueAllowed-1)));
          return initArr;*/
        } else {
          input = input.replace(/\s*/g,"").split(',');
          for (i in input) {
            input[i] = Number(input[i]);
            if (typeof input[i] == "NaN") {
              alert('Invalid input');
              return null;
            } 
          }
          return input;
        }
      }
      
      function getRandomData() {
        vertexAmt = Math.floor((Math.random()*(stWidget.maxVertexAllowed-5) + 5));
        var initArr = [];
        while(initArr.length < vertexAmt)
          initArr.push(Math.floor(1+Math.random()*(stWidget.maxValueAllowed-1)));
        return initArr;f
      }
      
      function create() {
        var data;
        if(isPlaying) { stop(); }
        setTimeout( function() {
          if ((mode=="exploration") && ((data = getCreateData()) != null) && stWidget.create(data)) {
            $('#current-action').show();
            $('#current-action p').html('Build tree');
            $('#progress-bar').slider( "option", "max", gw.getTotalIteration()-1);
            //closeCreate();
            closeAction("create");
            triggerRightPanels();
            isPlaying = true;
          }
        }, 500)
        nums=getCreateData();
        alert(nums);
      }

      function check_arr(element,arr){
           let count = 0;
     for (let i = 0; i < arr.length; i ++){
        if (arr[i] === element)  {
            count ++;
            break;
        }
    }
    return count;
}
function randomdata(){
    var nums=Math.floor(Math.random() * 5) + 4;
   // alert(nums);
    let myarray=[];
    var i=0;
    var j=0;
    for (i=0;i<nums;i++)
    {
        var value=Math.floor(Math.random() * 50) + 1;
       // alert(value);
      if(check_arr(value,myarray)==1)
      {
        var value=Math.floor(Math.random() * 50) + 1;
      }
        myarray.push(value);
    }
    //alert(myarray);
    return myarray;
  }
  
      </script>
      </body>
      </html>
 </script>

</body>

</html>
